import("libm3")

template("matrix")


Generic_module("Matrix")

Generic_module("MatrixFast")
Generic_module("MatrixBasic")
Matrix("Real",            "Fast",  "RealBasic")
Matrix("LongReal",        "Fast",  "LongRealBasic")
Matrix("Extended",        "Fast",  "ExtendedBasic")
Matrix("LongRealComplex", "Basic", "LongRealComplex")
Matrix("Integer32",       "Basic", "Integer32Basic")
Matrix("BigInteger",      "Basic", "BigInteger")

Generic_module("MatrixTrans")
MatrixTrans("Real",            "Real")
MatrixTrans("LongReal",        "LongReal")
% no EXTENDED EigenSystem
%MatrixTrans("Extended",        "Extended")
% no Complex EigenSystem
%MatrixTrans("RealComplex",     "Real")
%MatrixTrans("LongRealComplex", "LongReal")
%MatrixTrans("ExtendedComplex", "Extended")

Generic_module("MatrixDecomposition")
MatrixDecomposition("Real",     "RealBasic")
MatrixDecomposition("LongReal", "LongRealBasic")
MatrixDecomposition("Extended", "ExtendedBasic")

%LAPACKToModula3("Real",     "Real",     "MatrixLapackRaw", "s", "S")
%LAPACKToModula3("LongReal", "LongReal", "MatrixLapackRaw", "d", "D")
Generic_module("FloatMatrixLapack")
Lapack("Real",     "RealBasic")
Lapack("LongReal", "LongRealBasic")

Generic_module("EigenSystem")
EigenSystem("Real",     "RealBasic")
EigenSystem("LongReal", "LongRealBasic")
%EigenSystem("Extended", "ExtendedBasic")

Generic_module("CharPolynomial")
CharPolynomial("Real",            "RealBasic")
CharPolynomial("LongReal",        "LongRealBasic")
CharPolynomial("Extended",        "ExtendedBasic")
CharPolynomial("LongRealComplex", "LongRealComplex")
CharPolynomial("Integer32",       "Integer32Basic")
CharPolynomial("BigInteger",      "BigInteger")

Generic_module("MatrixFmtLex")
MatrixFmtLex("Real",            "RealBasic")
MatrixFmtLex("LongReal",        "LongRealBasic")
MatrixFmtLex("Extended",        "ExtendedBasic")
MatrixFmtLex("LongRealComplex", "LongRealComplex")
MatrixFmtLex("Integer32",       "Integer32Basic")
MatrixFmtLex("BigInteger",      "BigInteger")

% if you import 'blas' functions like 'e_wsfe' cannot be found
% if you then switch to 'gslcblas', compile, switch back to 'blas'
% then it can be compiled
%import_lib("blas","/usr/lib")

% needed for blas and lapack, part of the f2c package, I guess
%import_lib("g2c","/usr/lib")
%import_lib("blas","/usr/lib")
%import_lib("lapack","/usr/lib")

% inserted to cm3.cfg:
%     "BLAS-LAPACK": [ "-L/usr/lib", "-lg2c", "-lblas", "-llapack" ]
%import_sys_lib("BLAS-LAPACK")
