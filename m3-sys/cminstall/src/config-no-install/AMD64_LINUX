readonly TARGET = "AMD64_LINUX" % code generation target
readonly WORD_SIZE = "64BITS" % { "32BITS" or "64BITS" }
readonly GNU_PLATFORM = "amd64-pc-linux-gnu" % "cpu-vendor-os" string for GNU

%
% add s switch to ar and remove need for ranlib
%
readonly AR_AND_RANLIB_ARE_ONE = TRUE

readonly m3back_flags = "-quiet -gstabs+ -m64 -fPIC -mno-align-double"
readonly SYSTEM_CC = "gcc -gstabs+ -m64 -fPIC -mno-align-double" % C compiler
SYSTEM_LD = SYSTEM_CC
  & " -z now"
  & " -z origin"
  & " -Bsymbolic"
% I thought -as-needed was generally considered good, but it is
% breaking Linux/x86 so disable here for now.
% & " -Wl,--as-needed"
  & " -Wl,--fatal-warnings"
% & " -Wl,-no-allow-shlib-undefined"
  & " -Wl,-rpath,\\$ORIGIN/../lib"
  & " -Wl,--warn-common"
% -pie is broken by linking to positition-dependent static libraries,
% such as libz.a by cvsup on birch (elegosoft machine).
% Imho position-dependent code should just never exist, oh well.
%readonly POSITION_INDEPENDENT_EXECUTABLE = "-pie"
readonly USE_ORIGIN = TRUE
readonly SYSTEM_ASM = "as --64" % Assembler

%
% newer platforms never needed these workarounds for
% bootstrapping with older builds
%
readonly proc GetGcWrapFlags() is return "" end
readonly proc FixM3GcDefs(x) is return x end
readonly proc GetM3BackFlag(x) is return x end

include("Unix.common")
include("gnuld.common")

