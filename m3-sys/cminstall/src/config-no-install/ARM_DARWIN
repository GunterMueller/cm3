% Copyright 1996-2000 Critical Mass, Inc. All rights reserved.
% See file COPYRIGHT-CMASS for details.
%

readonly TARGET       = "ARM_DARWIN"
readonly WORD_SIZE    = "32BITS"
readonly GNU_PLATFORM = "arm-apple-darwin9"

readonly SYSTEM_ASM = GNU_PLATFORM & "-as -arch armv6"
readonly SYSTEM_CC = GNU_PLATFORM & "-gcc -fPIC -march=armv6 -mcpu=arm1176jzf-s"
readonly SYSTEM_LIBTOOL = GNU_PLATFORM & "-libtool"

readonly m3back_flags = "-fPIC -gstabs+ -quiet -march=armv6 -mcpu=arm1176jzf-s"

%
% newer platforms never needed these workarounds for
% bootstrapping with older builds
%
readonly proc GetGcWrapFlags() is return "" end
readonly proc FixM3GcDefs(x) is return x end

readonly proc GetM3BackFlag(x) is
    if equal (x, "-fno-reorder-blocks")
        return x
    end
    if equal (x, "-m32") or equal (x, "-m64") or equal (x, "-funwind-tables")
        return ""
    end
    error ("unknown flag: " & x)
end

include("Darwin.common")
