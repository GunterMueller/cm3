<!-- Changed by: Critical Mass, 25-Apr-1996 -->

<title>Exceptions: Making Programs Robust</title>
<h3>Exceptions: Making Programs Robust</h3>

<p>In the <a href=/example/copy>previous copy program</a>, the <code>FakeOS.Copy</code> 
   procedure has a problem: it crashes when any I/O exception (e.g., disk
   full, no permission to write) error is raised.

<p>A more robust interface, <a href=./FakeOS.i3><code>FakeOS.i3</code></a> 
and its implementation <a href=./FakeOS.m3><code>FakeOS.m3</code></a> 
illustrate how to use exceptions. The main module <a href=./Exceptions.m3>
<code>Exceptions.m3</code></a> calls the <code>FakeOS</code> interface. The
required changes are:

<ol>

<li>Add an <code>Error</code> exception to the <code>FakeOS</code> interface.

<li>Change <code>FakeOS.Copy</code> to raise <code>Error</code> when there 
is a problem, and include a text string describing the problem.

<li>Modify the <code>Main</code> module to handle this exception by printing a
message for the user.

</ol>

<p>You can try to test exception handling by copying a
   non-existent file.

<p>This program is now robust against various system exceptions. 
   If the program hadn't been handling a particular exception,
   you would have seen a warning at compile-time. This same program, 
   without any source modifications will work without crashing 
   due to system exceptions across any operating system supported 
   by cm3.

